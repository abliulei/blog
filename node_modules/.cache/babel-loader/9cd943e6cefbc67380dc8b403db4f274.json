{"remainingRequest":"D:\\blog\\node_modules\\thread-loader\\dist\\cjs.js!D:\\blog\\node_modules\\babel-loader\\lib\\index.js!D:\\blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\blog\\src\\components\\Comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\blog\\src\\components\\Comment.vue","mtime":1584714443457},{"path":"D:\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1564912410434},{"path":"D:\\blog\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1564912422410},{"path":"D:\\blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1564912409968},{"path":"D:\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1564912410434},{"path":"D:\\blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1564912422848}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      error: '评论加载中',\n      tips: '',\n      count: '',\n      comments: [],\n      type: '',\n      id: ''\n    };\n  },\n  props: {\n    msg: String\n  },\n  mounted: function mounted() {\n    //钩子函数\n    this.comment(this.msg);\n    layui.use(['form', 'layer'], function () {\n      var form = layui.form,\n          layer = layui.layer; // form.on('submit(comment)',function(data){\n      // layer.msg(JSON.stringify(data.field))\n      // return false;\n      // });\n    });\n  },\n  methods: {\n    input_focus: function input_focus(event) {\n      event.currentTarget.className = 'active';\n    },\n    input_blur: function input_blur() {\n      event.currentTarget.className = '';\n    },\n    replay_mouseover: function replay_mouseover(event) {\n      var replay = event.target.getElementsByClassName(\"replay\"); // console.log(replay)\n\n      for (var i = 0; i < replay.length; i++) {\n        replay[i].style.display = \"block\";\n      }\n    },\n    replay_mouseout: function replay_mouseout(event) {\n      var replay = event.target.getElementsByClassName(\"replay\");\n\n      for (var i = 0; i < replay.length; i++) {\n        replay[i].style.display = \"none\";\n      }\n    },\n    replay_mouseover_s: function replay_mouseover_s(event) {\n      event.target.style.display = \"block\";\n    },\n    replay: function replay(id, name) {\n      var input = document.getElementsByTagName(\"input\");\n      input.comment_id.value = id;\n      var textarea = document.getElementsByTagName(\"textarea\")[0];\n      textarea.placeholder = \"@\" + name;\n      event.target.style.display = \"block\";\n    },\n    replay_son: function replay_son(id, name) {\n      var input = document.getElementsByTagName(\"input\");\n      input.comment_id.value = id;\n      input.father_username.value = name;\n      var textarea = document.getElementsByTagName(\"textarea\")[0];\n      textarea.placeholder = \"@\" + name;\n      event.target.style.display = \"block\";\n    },\n    comment: function comment(data) {\n      var storage = window.localStorage;\n      var input = document.getElementsByTagName(\"input\");\n      var username = storage.getItem(\"username\");\n      var email = storage.getItem(\"email\");\n      var url = storage.getItem(\"url\");\n      input.username.value = username;\n      input.email.value = email;\n      input.url.value = url;\n      var arr = new Array(); //定义一数组\n\n      var param = null;\n      arr = data.split(\"&\"); //字符分割\n\n      if (arr[1]) {\n        param = 'id=' + arr[1] + '&type=' + arr[0];\n        this.type = arr[0];\n        this.id = arr[1];\n      } else {\n        param = 'type=' + arr[0];\n        this.type = arr[0];\n      }\n\n      this.$http.get('https://a.abliulei.com/api/getcomment?' + param).then(function (res) {\n        // console.log(res.data.data.length)\n        this.comments = res.data.data;\n        this.error = '';\n\n        if (res.data.data.length == 0) {\n          this.tips = '沙发还空着呢，快来评论鸭~';\n        } else {\n          this.count = res.data.data.length;\n        }\n      }, function () {\n        this.error = '服务器无响应，即将刷新页面...';\n        setTimeout(function () {\n          this.get();\n        }, 2000);\n      });\n    },\n    submit: function submit() {\n      var input = document.getElementsByTagName(\"input\");\n\n      if (Object.keys(input.username.value).length === 0) {\n        layer.msg(\"请输入昵称~\");\n        return false;\n      }\n\n      if (Object.keys(input.email.value).length === 0) {\n        layer.msg(\"请输入邮箱~\");\n        return false;\n      }\n\n      var mailReg = /^(\\w-*\\.*)+@(\\w-?)+(\\.\\w{2,})+$/;\n\n      if (mailReg.test(input.email.value) === false) {\n        layer.msg(\"邮箱格式不对~\");\n      }\n\n      var urlReg = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\*\\+,;=.]+$/;\n\n      if (Object.keys(input.url.value).length != 0 && urlReg.test(input.url.value) === false) {\n        layer.msg(\"网址格式不对~\");\n      }\n\n      var textarea = document.getElementsByTagName(\"textarea\");\n\n      if (Object.keys(textarea.content.value).length === 0) {\n        layer.msg(\"请输入评论~\");\n        return false;\n      } // let data = [];\n      // data.username = input.username.value\n      // data.email = input.email.value\n      // data.url = input.url.value\n      // data.content = textarea.content.value\n      // data.type = this.type\n      // data.id = this.id\n      // console.log(data)\n      // let datas = JSON.stringify(data)\n\n\n      var loading = layer.load(1, {\n        shade: 0.5,\n        time: 0\n      });\n      this.$http.post('https://a.abliulei.com/api/sendComment', {\n        'username': input.username.value,\n        'email': input.email.value,\n        'url': input.url.value,\n        'content': textarea.content.value,\n        'type': this.type,\n        'article_id': this.id,\n        'comment_id': input.comment_id.value,\n        'father_username': input.father_username.value\n      }, {\n        emulateJSON: true\n      }).then(function (res) {\n        var storage = window.localStorage;\n        storage.setItem(\"username\", input.username.value);\n        storage.setItem(\"email\", input.email.value);\n        storage.setItem(\"url\", input.url.value);\n        layer.close(loading);\n\n        if (res.data.code == 200) {\n          layer.msg(\"评论成功！\");\n        } else {\n          layer.msg(\"评论失败！\");\n        }\n\n        textarea.content.value = '';\n        this.comment(this.msg);\n        return false;\n      });\n    }\n  }\n};",{"version":3,"sources":["Comment.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"comment\">\r\n    <div class=\"comment_title\"><svg t=\"1565416387972\" class=\"icon\" viewBox=\"0 0 1025 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1082\" width=\"24\" height=\"24\"><path d=\"M293.0688 755.2c-12.0832 0-24.2688-4.2496-33.9968-12.9024L0 512l273.4592-243.0976C294.5536 250.2144 326.912 252.0064 345.7024 273.152c18.7904 21.1456 16.896 53.504-4.2496 72.2944L154.112 512l172.9536 153.7024c21.1456 18.7904 23.04 51.1488 4.2496 72.2944C321.2288 749.4144 307.1488 755.2 293.0688 755.2zM751.0528 755.0976 1024.512 512l-259.072-230.2976c-21.1456-18.7904-53.504-16.896-72.2432 4.2496-18.7904 21.1456-16.896 53.504 4.2496 72.2944L870.4 512l-187.3408 166.5024c-21.1456 18.7904-23.04 51.1488-4.2496 72.2944C688.896 762.2144 702.976 768 717.056 768 729.1392 768 741.3248 763.7504 751.0528 755.0976zM511.5392 827.648l102.4-614.4c4.6592-27.904-14.1824-54.272-42.0864-58.9312-28.0064-4.7104-54.3232 14.1824-58.88 42.0864l-102.4 614.4c-4.6592 27.904 14.1824 54.272 42.0864 58.9312C455.5264 870.1952 458.2912 870.4 461.1072 870.4 485.6832 870.4 507.392 852.6336 511.5392 827.648z\" p-id=\"1083\" fill=\"#D41C26\"></path></svg>发表评论</div>\r\n    <!-- <form class=\"layui-form\"> -->\r\n    <div class=\"comment_content\">\r\n        <div class=\"comment_userinfo\">\r\n          <input type=\"text\" name=\"username\" @focus=\"input_focus($event)\" @blur=\"input_blur($event)\" placeholder=\"昵称\" >\r\n          <input type=\"text\" name=\"email\" @focus=\"input_focus($event)\" @blur=\"input_blur($event)\" placeholder=\"邮箱\">\r\n          <input type=\"text\" name=\"url\" @focus=\"input_focus($event)\" @blur=\"input_blur($event)\" placeholder=\"地址(https://)\">\r\n        </div>\r\n        <div class=\"comment_edit\">\r\n          <textarea name=\"content\" id=\"\" cols=\"30\" rows=\"10\" placeholder=\"只接受好评。\" ></textarea>\r\n        </div>\r\n        <div class=\"comment_submit\">\r\n          <div>\r\n            <a href=\"https://abliulei.com/markdown\" target=\"_blank\" class=\"zhichi_md\">\r\n              <svg t=\"1576509244954\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1715\" width=\"28\" height=\"28\"><path d=\"M895.318 192 128.682 192C93.008 192 64 220.968 64 256.616l0 510.698C64 802.986 93.008 832 128.682 832l766.636 0C930.992 832 960 802.986 960 767.312L960 256.616C960 220.968 930.992 192 895.318 192zM568.046 704l-112.096 0 0-192-84.08 107.756L287.826 512l0 192L175.738 704 175.738 320l112.088 0 84.044 135.96 84.08-135.96 112.096 0L568.046 704 568.046 704zM735.36 704l-139.27-192 84 0 0-192 112.086 0 0 192 84.054 0-140.906 192L735.36 704z\" p-id=\"1716\" fill=\"#333333\"></path></svg>\r\n            </a>\r\n            \r\n          </div>\r\n          <button @click=\"submit();\">提交</button>\r\n        </div>\r\n    </div>\r\n    <div class=\"error\" v-if=\"this.error\">{{ error }} <i class=\"layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop\"></i></div>\r\n    <div class=\"tips\" v-if=\"this.tips\">{{ tips }}</div>\r\n    <div class=\"count\" v-if=\"this.count\">当前共<font>{{ count }}</font>条评论</div>\r\n    <!-- </form> -->\r\n    <div class=\"comment_list\" id=\"llmd\">\r\n      <div class=\"clist_u\" v-for=\"item in comments\" :key='item.id'>\r\n        <img class=\"cuimg\" :src=\"item.avatar\">\r\n        <div class=\"curight\" @mouseover=\"replay_mouseover($event)\" @mouseout=\"replay_mouseout($event)\">\r\n          <a :href=\"item.url\" class=\"cuname\" target=\"_blank\">{{ item.username }}</a>\r\n          <div class=\"cuinfo\">\r\n            <div class=\"cudate\">\r\n              <span>{{ item.addtime }}</span>\r\n              <span class=\"replay\" @mouseover=\"replay_mouseover_s($event)\" @click=\"replay(item.id,item.username)\">回复</span>\r\n            </div>\r\n            <div class=\"cucontent\" v-html=\"item.md\"></div>\r\n            <template v-if=\"item.son\">\r\n              <div class=\"cureplay\">\r\n                <div v-for=\"son in item.son\" :key=\"son.id\" class=\"clist_u\">\r\n                  <img class=\"cuimg\" :src=\"son.avatar\">\r\n                  <div class=\"curight_sm\">\r\n                    <a :href=\"son.url\" target=\"_blank\" class=\"cuname\">{{ son.username }}</a>\r\n                    <div class=\"cuinfo\">\r\n                      <div class=\"cudate\">\r\n                        <span>{{ son.addtime }}</span>\r\n                        <span class=\"replay\" @mouseover=\"replay_mouseover_s($event)\" @click=\"replay_son(item.id,son.username)\">回复</span>\r\n                      </div>\r\n                      <div class=\"cucontent\" v-html=\"son.md\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </template>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <input type=\"hidden\" name=\"comment_id\">\r\n      <input type=\"hidden\" name=\"father_username\">\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data(){\r\n    return{\r\n      error: '评论加载中',\r\n      tips: '',\r\n      count: '',\r\n      comments: [],\r\n      type: '',\r\n      id: ''\r\n    }\r\n  },\r\n  props: {\r\n    msg: String\r\n  },\r\n  mounted: function() { //钩子函数\r\n    this.comment(this.msg);\r\n    layui.use(['form','layer'], function(){\r\n      var form = layui.form\r\n        ,layer = layui.layer\r\n        // form.on('submit(comment)',function(data){\r\n          // layer.msg(JSON.stringify(data.field))\r\n          // return false;\r\n        // });\r\n    });\r\n  },\r\n  methods: {\r\n    input_focus: function(event){\r\n      event.currentTarget.className = 'active'\r\n    },\r\n    input_blur: function(){\r\n      event.currentTarget.className = ''\r\n    },\r\n    replay_mouseover: function(event){\r\n      var replay = event.target.getElementsByClassName(\"replay\");\r\n      // console.log(replay)\r\n      for (var i=0;i<replay.length;i++)\r\n      {   \r\n        replay[i].style.display = \"block\"; \r\n      }\r\n    },\r\n    replay_mouseout: function(event){\r\n      var replay = event.target.getElementsByClassName(\"replay\");\r\n      for (var i=0;i<replay.length;i++)\r\n      {   \r\n        replay[i].style.display = \"none\"; \r\n      }\r\n    },\r\n    replay_mouseover_s: function(event){\r\n      event.target.style.display = \"block\"\r\n    },\r\n    replay: function(id,name){\r\n      let input = document.getElementsByTagName(\"input\")\r\n      input.comment_id.value = id\r\n      let textarea = document.getElementsByTagName(\"textarea\")[0]\r\n      textarea.placeholder = \"@\"+name\r\n      event.target.style.display = \"block\"\r\n    },\r\n    replay_son: function(id,name){\r\n      let input = document.getElementsByTagName(\"input\")\r\n      input.comment_id.value = id\r\n      input.father_username.value = name\r\n      let textarea = document.getElementsByTagName(\"textarea\")[0]\r\n      textarea.placeholder = \"@\"+name\r\n      event.target.style.display = \"block\"\r\n    },\r\n    comment: function(data){\r\n      let storage = window.localStorage;\r\n      let input = document.getElementsByTagName(\"input\")\r\n      let username = storage.getItem(\"username\");\r\n      let email = storage.getItem(\"email\");\r\n      let url = storage.getItem(\"url\");\r\n      input.username.value = username\r\n      input.email.value = email\r\n      input.url.value = url\r\n      let arr= new Array(); //定义一数组\r\n      let param = null;\r\n      arr = data.split(\"&\"); //字符分割\r\n      if(arr[1]){\r\n        param = 'id='+arr[1]+'&type='+arr[0];\r\n        this.type = arr[0];\r\n        this.id = arr[1];\r\n      }else{\r\n        param = 'type='+arr[0];\r\n        this.type = arr[0];\r\n      }\r\n      this.$http.get('https://a.abliulei.com/api/getcomment?'+param).then(\r\n        function(res){\r\n          // console.log(res.data.data.length)\r\n          this.comments = res.data.data\r\n          this.error = ''\r\n          if(res.data.data.length==0){\r\n            this.tips = '沙发还空着呢，快来评论鸭~'\r\n          }else{\r\n            this.count = res.data.data.length\r\n          }\r\n        },function(){\r\n          this.error = '服务器无响应，即将刷新页面...';\r\n          setTimeout(function(){\r\n            this.get();\r\n          },2000);\r\n        })\r\n    },\r\n    submit: function(){\r\n        let input = document.getElementsByTagName(\"input\")\r\n        if(Object.keys(input.username.value).length === 0){\r\n          layer.msg(\"请输入昵称~\");\r\n          return false;\r\n        }\r\n        if(Object.keys(input.email.value).length === 0){\r\n          layer.msg(\"请输入邮箱~\");\r\n          return false;\r\n        }\r\n        let mailReg = /^(\\w-*\\.*)+@(\\w-?)+(\\.\\w{2,})+$/;\r\n        if(mailReg.test(input.email.value) === false){\r\n          layer.msg(\"邮箱格式不对~\");\r\n        }\r\n        let urlReg = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\*\\+,;=.]+$/;\r\n        if(Object.keys(input.url.value).length != 0 && urlReg.test(input.url.value) === false){\r\n          layer.msg(\"网址格式不对~\");\r\n        }\r\n        let textarea = document.getElementsByTagName(\"textarea\");\r\n        if(Object.keys(textarea.content.value).length === 0){\r\n          layer.msg(\"请输入评论~\");\r\n          return false;\r\n        }\r\n        // let data = [];\r\n        // data.username = input.username.value\r\n        // data.email = input.email.value\r\n        // data.url = input.url.value\r\n        // data.content = textarea.content.value\r\n        // data.type = this.type\r\n        // data.id = this.id\r\n        // console.log(data)\r\n        // let datas = JSON.stringify(data)\r\n        let loading = layer.load(1,{shade:0.5,time:0});\r\n        this.$http.post('https://a.abliulei.com/api/sendComment',{'username':input.username.value,'email':input.email.value,'url':input.url.value,'content':textarea.content.value,'type':this.type,'article_id':this.id,'comment_id':input.comment_id.value,'father_username':input.father_username.value},{emulateJSON:true}).then(\r\n            function(res){\r\n              let storage = window.localStorage;\r\n              storage.setItem(\"username\",input.username.value);\r\n              storage.setItem(\"email\",input.email.value);\r\n              storage.setItem(\"url\",input.url.value);\r\n              layer.close(loading);\r\n              if(res.data.code==200){\r\n                layer.msg(\"评论成功！\")\r\n              }else{\r\n                layer.msg(\"评论失败！\")\r\n              }\r\n              textarea.content.value = ''\r\n              this.comment(this.msg);\r\n              return false;\r\n            }\r\n        )\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n  @import '../assets/markdown.css';\r\n</style>\r\n<style scoped>\r\n.error,.tips,.count{\r\n  color: #666;\r\n  margin-top: 10px;\r\n}\r\n.count font{\r\n  margin: 0px 3px;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n}\r\n.comment{\r\n  width: 100%;\r\n}\r\n.comment .comment_title{\r\n  font-size: 16px;\r\n  color: #D41C26;\r\n  font-weight: 500;\r\n  /* border-bottom: 1px solid #ddd; */\r\n  width: 100%;\r\n  margin: 15px 0px;\r\n  line-height: 40px;\r\n  display: flex;\r\n}\r\n.comment .comment_title svg{\r\n  margin-top: 8px;\r\n  margin-right: 4px;\r\n}\r\n.comment .comment_content{\r\n  border: 1px solid #efefef;\r\n  border-radius: 5px;\r\n  padding: 10px 15px;\r\n}\r\n.comment .comment_content .comment_userinfo input{\r\n  width: calc( 100% / 3 );\r\n  height: 45px;\r\n  resize: none;\r\n  outline: none;\r\n  border: none;\r\n  border-bottom: 1px solid #ddd;\r\n  font-size: 13px;\r\n  text-indent: 6px;\r\n}\r\n.comment .comment_content .comment_userinfo .active{\r\n  /* color: #D41C26; */\r\n  border-bottom: 1px solid #D41C26;\r\n}\r\ninput::-webkit-input-placeholder{\r\n  color: #999;\r\n}\r\ninput::-moz-placeholder{\r\n  color: #999;\r\n}\r\ntextarea::-webkit-input-placeholder{\r\n  color: #999;\r\n}\r\ntextarea::-moz-placeholder{\r\n  color: #999;\r\n}\r\n.comment .comment_content .comment_edit textarea{\r\n  width: 100%;\r\n  resize: none;\r\n  outline: none;\r\n  border: none;\r\n  margin: 15px 0px;\r\n}\r\n.comment .comment_content .comment_submit{\r\n  display: flex;\r\n  justify-content: space-between;\r\n  /* text-align: right; */\r\n}\r\n.zhichi_md{\r\n  margin-top: 8px;\r\n  width: 28px;\r\n  height: 28px;\r\n}\r\n.zhichi_md :hover{\r\n  cursor: url('../assets/hand.png'),auto !important;\r\n}\r\n.comment .comment_content .comment_submit button{\r\n  width: 120px;\r\n  height: 36px;\r\n  background: #333;\r\n  color: #f1f1f1;\r\n  border-radius: 3px;\r\n  border: none;\r\n  cursor: url('../assets/hand.png'),auto !important;\r\n}\r\n.comment_list{\r\n  margin-top: 20px;\r\n  width: 100%;\r\n  height: auto;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n.comment_list .clist_u{\r\n  width: 100%;\r\n  margin-top: 10px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n.comment_list .clist_u .cuimg{\r\n  width: 70px;\r\n  height: 70px;\r\n  border-radius: 35px;\r\n}\r\n.comment_list .clist_u .curight,.comment_list .clist_u .curight_sm{\r\n  width: calc( 100% - 90px );\r\n  padding: 0px 10px 10px 10px;\r\n}\r\n.comment_list .clist_u .curight .cuname{\r\n  height: 25px;\r\n  line-height: 25px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #222 !important;\r\n  cursor: url('../assets/hand.png'),auto;\r\n  text-decoration: none !important;\r\n}\r\n.comment_list .clist_u .curight .cuname:hover{\r\n  color: #D41C26 !important;\r\n  cursor: url('../assets/hand.png'),auto !important;\r\n  border-bottom: 1px solid #D41C26;\r\n}\r\n.comment_list .clist_u .curight .cuinfo .cudate{\r\n  height: 25px;\r\n  line-height: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  color: #9c9c9c;\r\n}\r\n.comment_list .clist_u .curight .cuinfo .cucontent{\r\n  width: calc( 100% - 0px );\r\n  overflow: auto;\r\n  line-height: 1.8;\r\n}\r\n.comment_list .clist_u .curight .cuinfo .cureplay .curight{\r\n  width: calc( 100% - 80px );\r\n  padding: 0px 0px 10px 10px;\r\n}\r\n.replay{\r\n  cursor: url('../assets/hand.png'),auto;\r\n  display: none;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components"}]}