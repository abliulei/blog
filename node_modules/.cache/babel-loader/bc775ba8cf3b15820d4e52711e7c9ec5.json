{"remainingRequest":"D:\\blog\\node_modules\\thread-loader\\dist\\cjs.js!D:\\blog\\node_modules\\babel-loader\\lib\\index.js!D:\\blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\blog\\src\\components\\Music.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\blog\\src\\components\\Music.vue","mtime":1584714099466},{"path":"D:\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1564912410434},{"path":"D:\\blog\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1564912422410},{"path":"D:\\blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1564912409968},{"path":"D:\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1564912410434},{"path":"D:\\blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1564912422848}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar myTimer = [];\nexport default {\n  data: function data() {\n    return {\n      error: '数据加载中',\n      musicList: [],\n      nowMusic: 0,\n      rate: 0,\n      mp3_url: '',\n      is_play: false,\n      is_muted: false,\n      times: 0,\n      time: 0\n    };\n  },\n  mounted: function mounted() {\n    //钩子函数\n    this.getMusic();\n  },\n  methods: {\n    getMusic: function getMusic() {\n      this.$http.get('https://a.abliulei.com/api/getmusic').then(function (res) {\n        var data = res.data.data;\n        this.musicList = data;\n        this.mp3_url = this.musicList[0][\"url\"];\n      });\n    },\n    setAudioUrl: function setAudioUrl() {},\n    musicPlayOrPause: function musicPlayOrPause() {\n      this.mp3_url = this.musicList[this.nowMusic][\"url\"];\n      var audio = document.getElementsByClassName(\"audio\")[0];\n\n      var _this = this;\n\n      audio.addEventListener('ended', function () {\n        _this.musicNext();\n      }, false);\n      audio.load();\n\n      if (this.is_play) {\n        audio.pause();\n      } else {\n        var times;\n\n        audio.oncanplay = function () {\n          times = audio.duration;\n\n          _this.progress(times);\n        };\n\n        clearInterval(myTimer[0]);\n        audio.play();\n      }\n\n      _this.is_play = !_this.is_play;\n    },\n    progress: function progress(times) {\n      var time = 0;\n\n      var _this = this;\n\n      this.times = times;\n      myTimer[0] = setInterval(function () {\n        _this.rate = (time / times * 100).toFixed(2);\n        time++;\n        _this.time = time;\n\n        if (time == times) {\n          clearInterval(myTimer[0]);\n        }\n      }, 1000);\n    },\n    musicPrev: function musicPrev() {\n      if (this.nowMusic == 0) {\n        this.nowMusic = this.musicList.length - 1;\n      } else {\n        this.nowMusic = this.nowMusic - 1;\n      }\n\n      this.is_play = false;\n      var audio = document.getElementsByClassName(\"audio\")[0];\n      audio.pause();\n      this.musicPlayOrPause();\n    },\n    musicNext: function musicNext() {\n      if (this.nowMusic == this.musicList.length) {\n        this.nowMusic = 0;\n      } else {\n        this.nowMusic = this.nowMusic + 1;\n      }\n\n      this.is_play = false;\n      var audio = document.getElementsByClassName(\"audio\")[0];\n      audio.pause();\n      this.musicPlayOrPause();\n    },\n    playList: function playList(index) {\n      this.nowMusic = index;\n      this.is_play = false;\n      var audio = document.getElementsByClassName(\"audio\")[0];\n      audio.pause();\n      this.musicPlayOrPause();\n    },\n    musicVoice: function musicVoice() {\n      var audio = document.getElementsByClassName(\"audio\")[0];\n      audio.muted = !audio.muted;\n      this.is_muted = !this.is_muted;\n    }\n  },\n  computed: {\n    playOrPause: function playOrPause() {\n      if (this.is_play) {\n        return 'layui-icon-pause';\n      } else {\n        return 'layui-icon-play';\n      }\n    },\n    voiceMuted: function voiceMuted() {\n      if (this.is_muted) {\n        return 'layui-icon-mute';\n      } else {\n        return 'layui-icon-speaker';\n      }\n    },\n    songTimes: function songTimes() {\n      var minute = Math.floor(this.times / 60);\n\n      if (minute < 10) {\n        minute = \"0\" + minute;\n      }\n\n      var second = Math.floor(this.times - minute * 60);\n\n      if (second < 10) {\n        second = \"0\" + second;\n      }\n\n      var times = minute + ':' + second;\n      return times;\n    },\n    songTime: function songTime() {\n      var minute = Math.floor(this.time / 60);\n\n      if (minute < 10) {\n        minute = \"0\" + minute;\n      }\n\n      var second = Math.floor(this.time - minute * 60);\n\n      if (second < 10) {\n        second = \"0\" + second;\n      }\n\n      var time = minute + ':' + second;\n      return time;\n    }\n  }\n};",{"version":3,"sources":["Music.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"music\">\r\n    <div class=\"console\">\r\n      <div class=\"control\">\r\n        <i class=\"layui-icon layui-icon-left\" @click=\"musicPrev()\" title=\"上一首\"></i>\r\n        <i :class=\"['layui-icon',playOrPause]\" @click=\"musicPlayOrPause()\" title=\"播放\"></i>\r\n        <i class=\"layui-icon layui-icon-right\" @click=\"musicNext()\" title=\"下一首\"></i>\r\n        <i :class=\"['layui-icon', voiceMuted]\" @click=\"musicVoice()\" title=\"静音\"></i>\r\n      </div>\r\n      <div class=\"progress\" :title=\"songTimes\">\r\n        <div class=\"rate\" :style=\"{width: rate +'%'}\" :title=\"songTime\"></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"list\">\r\n      <div :class=\"{'active': nowMusic == index }\" v-for=\"(item, index) in musicList\" :key='item.id' @click=\"playList(index)\">\r\n        <span><font>{{index+1}}</font>{{item.name}}</span>\r\n        <span>{{item.singer}}</span>\r\n      </div>\r\n    </div>\r\n    <audio class=\"audio\" v-if=\"mp3_url\" :src=\"mp3_url\"></audio>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nconst myTimer=[];\r\nexport default {\r\n  data(){\r\n    return{\r\n      error: '数据加载中',\r\n      musicList: [],\r\n      nowMusic: 0,\r\n      rate: 0,\r\n      mp3_url: '',\r\n      is_play: false,\r\n      is_muted: false,\r\n      times: 0,\r\n      time: 0\r\n    }\r\n  },\r\n  mounted: function() { //钩子函数\r\n    this.getMusic();\r\n  },\r\n  methods: {\r\n    getMusic: function(){\r\n      this.$http.get('https://a.abliulei.com/api/getmusic').then(\r\n        function(res){\r\n          let data = res.data.data\r\n          this.musicList = data\r\n          this.mp3_url = this.musicList[0][\"url\"]\r\n      })\r\n    },\r\n    setAudioUrl: function(){\r\n\r\n    },\r\n    musicPlayOrPause: function(){\r\n      this.mp3_url = this.musicList[this.nowMusic][\"url\"]\r\n      let audio = document.getElementsByClassName(\"audio\")[0]\r\n      let _this = this\r\n      audio.addEventListener('ended', function () {\r\n        _this.musicNext()\r\n      }, false);\r\n      audio.load();\r\n      if(this.is_play){\r\n        audio.pause()\r\n      }else{\r\n        var times\r\n        audio.oncanplay = function(){\r\n          times = audio.duration\r\n          _this.progress(times)\r\n        }\r\n        clearInterval(myTimer[0])\r\n        audio.play()\r\n      }\r\n      _this.is_play = !_this.is_play\r\n    },\r\n    progress: function(times){\r\n      let time = 0\r\n      let _this = this\r\n      this.times = times\r\n      myTimer[0] = setInterval(() => {\r\n        _this.rate = (time/times*100).toFixed(2);\r\n        time++\r\n        _this.time = time\r\n        if(time==times){\r\n          clearInterval(myTimer[0])\r\n        }\r\n      }, 1000);\r\n    },\r\n    musicPrev: function(){\r\n      if(this.nowMusic==0){\r\n        this.nowMusic = this.musicList.length-1\r\n      }else{\r\n        this.nowMusic = this.nowMusic-1\r\n      }\r\n      this.is_play = false\r\n      let audio = document.getElementsByClassName(\"audio\")[0]\r\n      audio.pause()\r\n      this.musicPlayOrPause()\r\n    },\r\n    musicNext: function(){\r\n      if(this.nowMusic==this.musicList.length){\r\n        this.nowMusic = 0\r\n      }else{\r\n        this.nowMusic = this.nowMusic+1\r\n      }\r\n      this.is_play = false\r\n      let audio = document.getElementsByClassName(\"audio\")[0]\r\n      audio.pause()\r\n      this.musicPlayOrPause()\r\n    },\r\n    playList: function(index){\r\n      this.nowMusic = index\r\n      this.is_play = false\r\n      let audio = document.getElementsByClassName(\"audio\")[0]\r\n      audio.pause()\r\n      this.musicPlayOrPause()\r\n    },\r\n    musicVoice: function(){\r\n      let audio = document.getElementsByClassName(\"audio\")[0]\r\n      audio.muted = !audio.muted\r\n      this.is_muted = !this.is_muted\r\n    }\r\n  },\r\n  computed: {\r\n    playOrPause: function(){\r\n      if(this.is_play){\r\n        return 'layui-icon-pause'\r\n      }else{\r\n        return 'layui-icon-play'\r\n      }\r\n    },\r\n    voiceMuted: function(){\r\n      if(this.is_muted){\r\n        return 'layui-icon-mute'\r\n      }else{\r\n        return 'layui-icon-speaker'\r\n      }\r\n    },\r\n    songTimes: function(){\r\n      let minute = Math.floor(this.times / 60)\r\n      if(minute<10){\r\n        minute = \"0\"+minute\r\n      }\r\n      let second = Math.floor(this.times - (minute * 60))\r\n      if(second<10){\r\n        second = \"0\"+second\r\n      }\r\n      let times = minute+':'+second\r\n      return times\r\n    },\r\n    songTime: function(){\r\n      let minute = Math.floor(this.time / 60)\r\n      if(minute<10){\r\n        minute = \"0\"+minute\r\n      }\r\n      let second = Math.floor(this.time - (minute * 60))\r\n      if(second<10){\r\n        second = \"0\"+second\r\n      }\r\n      let time = minute+':'+second\r\n      return time\r\n    }\r\n  }, \r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.music{\r\n  width: 260px;\r\n  max-height: 250px;\r\n  background-color: #E6E6E6;\r\n  position: absolute;\r\n  left: 295px;\r\n  top: 25px;\r\n  border-radius: 5px;\r\n}\r\n.music .console{\r\n  width: 260px;\r\n  position: absolute;\r\n  background-color: #E6E6E6;\r\n  border-top-right-radius: 5px;\r\n  border-top-left-radius: 5px;\r\n}\r\n.music .console .control{\r\n  display: flex;\r\n  justify-content: space-around;\r\n  margin: 12px 0px;\r\n}\r\n.music .console .control i{\r\n  cursor: url('../assets/hand.png'),auto !important;\r\n  font-size: 18px;\r\n  color: #0a0a0a;\r\n}\r\n.music .console .progress{\r\n  height: 3px;\r\n  background: #ffffff;\r\n  border-radius: 5px;\r\n}\r\n.music .console .progress .rate{\r\n  background: #0a0a0a;\r\n  height: 3px;\r\n  border-radius: 5px;\r\n}\r\n.music .list{\r\n  max-height: 200px;\r\n  margin-top: 50px;\r\n  overflow: auto;\r\n  border-bottom-right-radius: 5px;\r\n  border-bottom-left-radius: 5px;\r\n}\r\n.music .list div{\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 10px;\r\n  cursor: url('../assets/hand.png'),auto !important;\r\n}\r\n.music .list div span{\r\n  display: flex;\r\n  cursor: url('../assets/hand.png'),auto !important;\r\n}\r\n.music .list div font{\r\n  cursor: url('../assets/hand.png'),auto !important;\r\n  margin-right: 3px;\r\n  margin-top: 1px;\r\n  text-align: center;\r\n  width: 15px;\r\n  display: block;\r\n  overflow: hidden;\r\n}\r\n.music .list div:hover{\r\n  background: #cccccc;\r\n  cursor: url('../assets/hand.png'),auto !important;\r\n}\r\n.music .list .active{\r\n  background: #c0c0c0;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components"}]}