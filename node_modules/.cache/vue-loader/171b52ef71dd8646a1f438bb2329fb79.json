{"remainingRequest":"D:\\blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\blog\\src\\components\\Comment.vue?vue&type=style&index=0&id=4d862a08&scoped=true&lang=css&","dependencies":[{"path":"D:\\blog\\src\\components\\Comment.vue","mtime":1576763580674},{"path":"D:\\blog\\node_modules\\css-loader\\index.js","mtime":1564912412051},{"path":"D:\\blog\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1564912422849},{"path":"D:\\blog\\node_modules\\postcss-loader\\src\\index.js","mtime":1564912417339},{"path":"D:\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1564912410434},{"path":"D:\\blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1564912422848}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import '../assets/markdown.css';\n",{"version":3,"sources":["Comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoNA","file":"Comment.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"comment\" id=\"llmd\">\r\n    <div class=\"comment_title\"><svg t=\"1565416387972\" class=\"icon\" viewBox=\"0 0 1025 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1082\" width=\"24\" height=\"24\"><path d=\"M293.0688 755.2c-12.0832 0-24.2688-4.2496-33.9968-12.9024L0 512l273.4592-243.0976C294.5536 250.2144 326.912 252.0064 345.7024 273.152c18.7904 21.1456 16.896 53.504-4.2496 72.2944L154.112 512l172.9536 153.7024c21.1456 18.7904 23.04 51.1488 4.2496 72.2944C321.2288 749.4144 307.1488 755.2 293.0688 755.2zM751.0528 755.0976 1024.512 512l-259.072-230.2976c-21.1456-18.7904-53.504-16.896-72.2432 4.2496-18.7904 21.1456-16.896 53.504 4.2496 72.2944L870.4 512l-187.3408 166.5024c-21.1456 18.7904-23.04 51.1488-4.2496 72.2944C688.896 762.2144 702.976 768 717.056 768 729.1392 768 741.3248 763.7504 751.0528 755.0976zM511.5392 827.648l102.4-614.4c4.6592-27.904-14.1824-54.272-42.0864-58.9312-28.0064-4.7104-54.3232 14.1824-58.88 42.0864l-102.4 614.4c-4.6592 27.904 14.1824 54.272 42.0864 58.9312C455.5264 870.1952 458.2912 870.4 461.1072 870.4 485.6832 870.4 507.392 852.6336 511.5392 827.648z\" p-id=\"1083\" fill=\"#D41C26\"></path></svg>发表评论</div>\r\n    <!-- <form class=\"layui-form\"> -->\r\n    <div class=\"comment_content\">\r\n        <div class=\"comment_userinfo\">\r\n          <input type=\"text\" name=\"username\" @focus=\"input_focus($event)\" @blur=\"input_blur($event)\" placeholder=\"昵称\" >\r\n          <input type=\"text\" name=\"email\" @focus=\"input_focus($event)\" @blur=\"input_blur($event)\" placeholder=\"邮箱\">\r\n          <input type=\"text\" name=\"url\" @focus=\"input_focus($event)\" @blur=\"input_blur($event)\" placeholder=\"地址(https://)\">\r\n        </div>\r\n        <div class=\"comment_edit\">\r\n          <textarea name=\"content\" id=\"\" cols=\"30\" rows=\"10\" placeholder=\"只接受好评。\" ></textarea>\r\n        </div>\r\n        <div class=\"comment_submit\">\r\n          <a href=\"https://www.mdeditor.com/\" target=\"_blank\" class=\"zhichi_md\">\r\n            <svg t=\"1576509244954\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1715\" width=\"28\" height=\"28\"><path d=\"M895.318 192 128.682 192C93.008 192 64 220.968 64 256.616l0 510.698C64 802.986 93.008 832 128.682 832l766.636 0C930.992 832 960 802.986 960 767.312L960 256.616C960 220.968 930.992 192 895.318 192zM568.046 704l-112.096 0 0-192-84.08 107.756L287.826 512l0 192L175.738 704 175.738 320l112.088 0 84.044 135.96 84.08-135.96 112.096 0L568.046 704 568.046 704zM735.36 704l-139.27-192 84 0 0-192 112.086 0 0 192 84.054 0-140.906 192L735.36 704z\" p-id=\"1716\" fill=\"#333333\"></path></svg>\r\n          </a>\r\n          <button @click=\"submit();\">提交</button>\r\n        </div>\r\n    </div>\r\n    <div class=\"error\" v-if=\"this.error\">{{ error }} <i class=\"layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop\"></i></div>\r\n    <!-- </form> -->\r\n    <div class=\"comment_list\">\r\n      <div class=\"clist_u\" v-for=\"item in comments\" :key='item.id'>\r\n        <img class=\"cuimg\" :src=\"item.avatar\">\r\n        <div class=\"curight\" @mouseover=\"replay_mouseover($event)\" @mouseout=\"replay_mouseout($event)\">\r\n          <a :href=\"item.url\" class=\"cuname\" target=\"_blank\">{{ item.username }}</a>\r\n          <div class=\"cuinfo\">\r\n            <div class=\"cudate\">\r\n              <span>{{ item.addtime }}</span>\r\n              <span class=\"replay\" @mouseover=\"replay_mouseover_s($event)\" @click=\"replay(item.id,item.username)\">回复</span>\r\n            </div>\r\n            <div class=\"cucontent\" v-html=\"item.md\"></div>\r\n            <template v-if=\"item.son\">\r\n              <div class=\"cureplay\">\r\n                <div v-for=\"son in item.son\" :key=\"son.id\" class=\"clist_u\">\r\n                  <img class=\"cuimg\" :src=\"son.avatar\">\r\n                  <div class=\"curight_sm\">\r\n                    <a :href=\"son.url\" target=\"_blank\" class=\"cuname\">{{ son.username }}</a>\r\n                    <div class=\"cuinfo\">\r\n                      <div class=\"cudate\">\r\n                        <span>{{ son.addtime }}</span>\r\n                        <span class=\"replay\" @mouseover=\"replay_mouseover_s($event)\" @click=\"replay_son(item.id,son.username)\">回复</span>\r\n                      </div>\r\n                      <div class=\"cucontent\" v-html=\"son.md\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </template>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <input type=\"hidden\" name=\"comment_id\">\r\n      <input type=\"hidden\" name=\"father_username\">\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data(){\r\n    return{\r\n      error: '评论加载中',\r\n      comments: [],\r\n      type:'',\r\n      id:''\r\n    }\r\n  },\r\n  props: {\r\n    msg: String\r\n  },\r\n  mounted: function() { //钩子函数\r\n    this.comment(this.msg);\r\n    layui.use(['form','layer'], function(){\r\n      var form = layui.form\r\n        ,layer = layui.layer\r\n        // form.on('submit(comment)',function(data){\r\n          // layer.msg(JSON.stringify(data.field))\r\n          // return false;\r\n        // });\r\n    });\r\n  },\r\n  methods: {\r\n    input_focus: function(event){\r\n      event.currentTarget.className = 'active'\r\n    },\r\n    input_blur: function(){\r\n      event.currentTarget.className = ''\r\n    },\r\n    replay_mouseover: function(event){\r\n      var replay = event.target.getElementsByClassName(\"replay\");\r\n      // console.log(replay)\r\n      for (var i=0;i<replay.length;i++)\r\n      {   \r\n        replay[i].style.display = \"block\"; \r\n      }\r\n    },\r\n    replay_mouseout: function(event){\r\n      var replay = event.target.getElementsByClassName(\"replay\");\r\n      for (var i=0;i<replay.length;i++)\r\n      {   \r\n        replay[i].style.display = \"none\"; \r\n      }\r\n    },\r\n    replay_mouseover_s: function(event){\r\n      event.target.style.display = \"block\"\r\n    },\r\n    replay: function(id,name){\r\n      let input = document.getElementsByTagName(\"input\")\r\n      input.comment_id.value = id\r\n      let textarea = document.getElementsByTagName(\"textarea\")[0]\r\n      textarea.placeholder = \"@\"+name\r\n      event.target.style.display = \"block\"\r\n    },\r\n    replay_son: function(id,name){\r\n      let input = document.getElementsByTagName(\"input\")\r\n      input.comment_id.value = id\r\n      input.father_username.value = name\r\n      let textarea = document.getElementsByTagName(\"textarea\")[0]\r\n      textarea.placeholder = \"@\"+name\r\n      event.target.style.display = \"block\"\r\n    },\r\n    comment: function(data){\r\n      let storage = window.localStorage;\r\n      let input = document.getElementsByTagName(\"input\")\r\n      let username = storage.getItem(\"username\");\r\n      let email = storage.getItem(\"email\");\r\n      let url = storage.getItem(\"url\");\r\n      input.username.value = username\r\n      input.email.value = email\r\n      input.url.value = url\r\n      let arr= new Array(); //定义一数组\r\n      let param = null;\r\n      arr = data.split(\"&\"); //字符分割\r\n      if(arr[1]){\r\n        param = 'id='+arr[1]+'&type='+arr[0];\r\n        this.type = arr[0];\r\n        this.id = arr[1];\r\n      }else{\r\n        param = 'type='+arr[0];\r\n        this.type = arr[0];\r\n      }\r\n      this.$http.get('https://a.abliulei.com/api/getcomment?'+param).then(\r\n        function(res){\r\n          // console.log(res.data.data)\r\n          this.comments = res.data.data\r\n          this.error = ''\r\n        },function(){\r\n          this.error = '服务器无响应，即将刷新页面...';\r\n          let timer = setTimeout(function(){\r\n            location.reload()\r\n          },2000);\r\n        })\r\n    },\r\n    submit: function(){\r\n        let input = document.getElementsByTagName(\"input\")\r\n        if(Object.keys(input.username.value).length === 0){\r\n          layer.msg(\"请输入昵称~\");\r\n          return false;\r\n        }\r\n        if(Object.keys(input.email.value).length === 0){\r\n          layer.msg(\"请输入邮箱~\");\r\n          return false;\r\n        }\r\n        let mailReg = /^(\\w-*\\.*)+@(\\w-?)+(\\.\\w{2,})+$/;\r\n        if(mailReg.test(input.email.value) === false){\r\n          layer.msg(\"邮箱格式不对~\");\r\n        }\r\n        let urlReg = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\*\\+,;=.]+$/;\r\n        if(Object.keys(input.url.value).length != 0 && urlReg.test(input.url.value) === false){\r\n          layer.msg(\"网址格式不对~\");\r\n        }\r\n        let textarea = document.getElementsByTagName(\"textarea\");\r\n        if(Object.keys(textarea.content.value).length === 0){\r\n          layer.msg(\"请输入评论~\");\r\n          return false;\r\n        }\r\n        // let data = [];\r\n        // data.username = input.username.value\r\n        // data.email = input.email.value\r\n        // data.url = input.url.value\r\n        // data.content = textarea.content.value\r\n        // data.type = this.type\r\n        // data.id = this.id\r\n        // console.log(data)\r\n        // let datas = JSON.stringify(data)\r\n        let loading = layer.load(1,{shade:0.5,time:0});\r\n        this.$http.post('https://a.abliulei.com/api/sendComment',{'username':input.username.value,'email':input.email.value,'url':input.url.value,'content':textarea.content.value,'type':this.type,'article_id':this.id,'comment_id':input.comment_id.value,'father_username':input.father_username.value},{emulateJSON:true}).then(\r\n            function(res){\r\n              let storage = window.localStorage;\r\n              storage.setItem(\"username\",input.username.value);\r\n              storage.setItem(\"email\",input.email.value);\r\n              storage.setItem(\"url\",input.url.value);\r\n              layer.close(loading);\r\n              if(res.body.code==200){\r\n                layer.msg(\"评论成功！\")\r\n              }else{\r\n                layer.msg(\"评论失败！\")\r\n              }\r\n              textarea.content.value = ''\r\n              this.comment(this.msg);\r\n              return false;\r\n            }\r\n        )\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n  @import '../assets/markdown.css';\r\n</style>\r\n<style scoped>\r\n.error{\r\n  color: #666;\r\n  margin-top: 8px;\r\n}\r\n.comment{\r\n  width: 100%;\r\n}\r\n.comment .comment_title{\r\n  font-size: 16px;\r\n  color: #D41C26;\r\n  font-weight: 500;\r\n  /* border-bottom: 1px solid #ddd; */\r\n  width: 100%;\r\n  margin: 15px 0px;\r\n  line-height: 40px;\r\n  display: flex;\r\n}\r\n.comment .comment_title svg{\r\n  margin-top: 8px;\r\n  margin-right: 4px;\r\n}\r\n.comment .comment_content{\r\n  border: 1px solid #efefef;\r\n  border-radius: 5px;\r\n  padding: 10px 15px;\r\n}\r\n.comment .comment_content .comment_userinfo input{\r\n  width: calc( 100% / 3 );\r\n  height: 45px;\r\n  resize: none;\r\n  outline: none;\r\n  border: none;\r\n  border-bottom: 1px solid #ddd;\r\n  font-size: 13px;\r\n  text-indent: 6px;\r\n}\r\n.comment .comment_content .comment_userinfo .active{\r\n  /* color: #D41C26; */\r\n  border-bottom: 1px solid #D41C26;\r\n}\r\ninput::-webkit-input-placeholder{\r\n  color: #999;\r\n}\r\ninput::-moz-placeholder{\r\n  color: #999;\r\n}\r\ntextarea::-webkit-input-placeholder{\r\n  color: #999;\r\n}\r\ntextarea::-moz-placeholder{\r\n  color: #999;\r\n}\r\n.comment .comment_content .comment_edit textarea{\r\n  width: 100%;\r\n  resize: none;\r\n  outline: none;\r\n  border: none;\r\n  margin: 15px 0px;\r\n}\r\n.comment .comment_content .comment_submit{\r\n  display: flex;\r\n  justify-content: space-between;\r\n  /* text-align: right; */\r\n}\r\n.comment .comment_content .comment_submit .zhichi_md:hover{\r\n  \r\n  cursor: url('../assets/mouse.png'),auto !important;\r\n}\r\n.comment .comment_content .comment_submit button{\r\n  width: 120px;\r\n  height: 36px;\r\n  background: #333;\r\n  color: #f1f1f1;\r\n  border-radius: 3px;\r\n  border: none;\r\n  cursor: url('../assets/hand.png'),auto;\r\n}\r\n.comment_list{\r\n  margin-top: 10px;\r\n  width: 100%;\r\n  height: auto;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n.comment_list .clist_u{\r\n  width: 100%;\r\n  margin-top: 10px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n.comment_list .clist_u .cuimg{\r\n  width: 70px;\r\n  height: 70px;\r\n  border-radius: 35px;\r\n}\r\n.comment_list .clist_u .curight,.comment_list .clist_u .curight_sm{\r\n  width: calc( 100% - 90px );\r\n  padding: 0px 10px 10px 10px;\r\n}\r\n.comment_list .clist_u .curight .cuname{\r\n  height: 25px;\r\n  line-height: 25px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #222 !important;\r\n  cursor: url('../assets/hand.png'),auto;\r\n  text-decoration: none !important;\r\n}\r\n.comment_list .clist_u .curight .cuname:hover{\r\n  color: #D41C26 !important;\r\n  cursor: url('../assets/mouse.png'),auto !important;\r\n}\r\n.comment_list .clist_u .curight .cuinfo .cudate{\r\n  height: 25px;\r\n  line-height: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  color: #9c9c9c;\r\n}\r\n.comment_list .clist_u .curight .cuinfo .cucontent{\r\n  width: calc( 100% - 0px );\r\n  overflow: auto;\r\n  line-height: 1.8;\r\n}\r\n.comment_list .clist_u .curight .cuinfo .cureplay .curight{\r\n  width: calc( 100% - 80px );\r\n  padding: 0px 0px 10px 10px;\r\n}\r\n.replay{\r\n  cursor: url('../assets/hand.png'),auto;\r\n  display: none;\r\n}\r\n</style>\r\n"]}]}